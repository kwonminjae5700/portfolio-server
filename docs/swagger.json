{
  "swagger": "2.0",
  "info": {
    "title": "Portfolio Server API",
    "description": "GoLang 기반 게시판 백엔드 서비스",
    "version": "1.0"
  },
  "host": "localhost:8080",
  "basePath": "/",
  "schemes": ["http", "https"],
  "securityDefinitions": {
    "Bearer": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header",
      "description": "Bearer <token>"
    }
  },
  "paths": {
    "/health": {
      "get": {
        "summary": "헬스 체크",
        "description": "서버 상태를 확인합니다",
        "tags": ["health"],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/auth/register": {
      "post": {
        "summary": "사용자 회원가입",
        "description": "새로운 사용자를 등록합니다",
        "tags": ["auth"],
        "consumes": ["application/json"],
        "produces": ["application/json"],
        "parameters": [
          {
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "email": {"type": "string"},
                "username": {"type": "string"},
                "password": {"type": "string"}
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "회원가입 성공"
          },
          "400": {
            "description": "잘못된 요청"
          },
          "409": {
            "description": "이미 존재하는 사용자"
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "summary": "사용자 로그인",
        "description": "사용자 인증정보로 로그인합니다",
        "tags": ["auth"],
        "consumes": ["application/json"],
        "produces": ["application/json"],
        "parameters": [
          {
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "email": {"type": "string"},
                "password": {"type": "string"}
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "로그인 성공"
          },
          "400": {
            "description": "잘못된 요청"
          },
          "401": {
            "description": "인증 실패"
          }
        }
      }
    },
    "/auth/profile": {
      "get": {
        "summary": "프로필 조회",
        "description": "현재 로그인한 사용자의 프로필을 조회합니다",
        "tags": ["auth"],
        "security": [{"Bearer": []}],
        "produces": ["application/json"],
        "responses": {
          "200": {
            "description": "프로필 조회 성공"
          },
          "401": {
            "description": "인증 필요"
          }
        }
      }
    },
    "/articles": {
      "get": {
        "summary": "글 목록 조회",
        "description": "커서 기반 무한 스크롤로 게시글 목록을 조회합니다",
        "tags": ["articles"],
        "produces": ["application/json"],
        "parameters": [
          {
            "name": "last_id",
            "in": "query",
            "type": "integer",
            "description": "마지막 글 ID"
          },
          {
            "name": "limit",
            "in": "query",
            "type": "integer",
            "default": 20,
            "description": "조회할 개수"
          }
        ],
        "responses": {
          "200": {
            "description": "글 목록 조회 성공"
          },
          "400": {
            "description": "잘못된 요청"
          }
        }
      },
      "post": {
        "summary": "글 작성",
        "description": "새로운 게시글을 작성합니다",
        "tags": ["articles"],
        "security": [{"Bearer": []}],
        "consumes": ["application/json"],
        "produces": ["application/json"],
        "parameters": [
          {
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "title": {"type": "string"},
                "content": {"type": "string"},
                "category_ids": {
                  "type": "array",
                  "items": {"type": "integer"},
                  "description": "카테고리 ID 목록"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "글 작성 성공"
          },
          "400": {
            "description": "잘못된 요청"
          },
          "401": {
            "description": "인증 필요"
          }
        }
      }
    },
    "/articles/top/views": {
      "get": {
        "summary": "조회수 TOP 5 글",
        "description": "조회수가 가장 높은 5개의 글을 반환합니다",
        "tags": ["articles"],
        "produces": ["application/json"],
        "responses": {
          "200": {
            "description": "성공",
            "schema": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": {"type": "integer"},
                  "title": {"type": "string"},
                  "view_count": {"type": "integer"}
                }
              }
            }
          },
          "500": {
            "description": "서버 오류"
          }
        }
      }
    },
    "/articles/{id}": {
      "get": {
        "summary": "글 상세 조회",
        "description": "특정 게시글의 상세 정보를 조회합니다",
        "tags": ["articles"],
        "produces": ["application/json"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "글 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "글 상세 조회 성공"
          },
          "400": {
            "description": "잘못된 요청"
          },
          "404": {
            "description": "글을 찾을 수 없음"
          }
        }
      },
      "put": {
        "summary": "글 수정",
        "description": "자신의 게시글을 수정합니다",
        "tags": ["articles"],
        "security": [{"Bearer": []}],
        "consumes": ["application/json"],
        "produces": ["application/json"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "글 ID"
          },
          {
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "title": {"type": "string"},
                "content": {"type": "string"},
                "category_ids": {
                  "type": "array",
                  "items": {"type": "integer"},
                  "description": "카테고리 ID 목록"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "글 수정 성공"
          },
          "400": {
            "description": "잘못된 요청"
          },
          "401": {
            "description": "인증 필요"
          },
          "403": {
            "description": "권한 없음"
          },
          "404": {
            "description": "글을 찾을 수 없음"
          }
        }
      },
      "delete": {
        "summary": "글 삭제",
        "description": "자신의 게시글을 삭제합니다",
        "tags": ["articles"],
        "security": [{"Bearer": []}],
        "produces": ["application/json"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "글 ID"
          }
        ],
        "responses": {
          "204": {
            "description": "글 삭제 성공"
          },
          "400": {
            "description": "잘못된 요청"
          },
          "401": {
            "description": "인증 필요"
          },
          "403": {
            "description": "권한 없음"
          },
          "404": {
            "description": "글을 찾을 수 없음"
          }
        }
      }
    },
    "/categories": {
      "get": {
        "summary": "카테고리 목록 조회",
        "description": "모든 카테고리 목록을 조회합니다",
        "tags": ["categories"],
        "produces": ["application/json"],
        "responses": {
          "200": {
            "description": "카테고리 목록 조회 성공",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Category"
              }
            }
          }
        }
      },
      "post": {
        "summary": "카테고리 생성",
        "description": "새로운 카테고리를 생성합니다",
        "tags": ["categories"],
        "security": [{"Bearer": []}],
        "consumes": ["application/json"],
        "produces": ["application/json"],
        "parameters": [
          {
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": ["name"],
              "properties": {
                "name": {
                  "type": "string",
                  "description": "카테고리 이름"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "카테고리 생성 성공"
          },
          "400": {
            "description": "잘못된 요청"
          },
          "401": {
            "description": "인증 필요"
          }
        }
      }
    },
    "/categories/{id}": {
      "get": {
        "summary": "카테고리 상세 조회",
        "description": "특정 카테고리의 상세 정보를 조회합니다",
        "tags": ["categories"],
        "produces": ["application/json"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "카테고리 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "카테고리 조회 성공"
          },
          "400": {
            "description": "잘못된 요청"
          },
          "404": {
            "description": "카테고리를 찾을 수 없음"
          }
        }
      },
      "put": {
        "summary": "카테고리 수정",
        "description": "카테고리 정보를 수정합니다",
        "tags": ["categories"],
        "security": [{"Bearer": []}],
        "consumes": ["application/json"],
        "produces": ["application/json"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "카테고리 ID"
          },
          {
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": ["name"],
              "properties": {
                "name": {
                  "type": "string",
                  "description": "카테고리 이름"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "카테고리 수정 성공"
          },
          "400": {
            "description": "잘못된 요청"
          },
          "401": {
            "description": "인증 필요"
          },
          "404": {
            "description": "카테고리를 찾을 수 없음"
          }
        }
      },
      "delete": {
        "summary": "카테고리 삭제",
        "description": "카테고리를 삭제합니다",
        "tags": ["categories"],
        "security": [{"Bearer": []}],
        "produces": ["application/json"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "카테고리 ID"
          }
        ],
        "responses": {
          "204": {
            "description": "카테고리 삭제 성공"
          },
          "400": {
            "description": "잘못된 요청"
          },
          "401": {
            "description": "인증 필요"
          },
          "404": {
            "description": "카테고리를 찾을 수 없음"
          }
        }
      }
    },
    "/articles/{id}/comments": {
      "get": {
        "summary": "댓글 목록 조회",
        "description": "특정 게시글의 댓글 목록을 조회합니다",
        "tags": ["comments"],
        "produces": ["application/json"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "게시글 ID"
          },
          {
            "name": "last_id",
            "in": "query",
            "type": "integer",
            "description": "마지막 댓글 ID (커서)"
          },
          {
            "name": "limit",
            "in": "query",
            "type": "integer",
            "default": 20,
            "description": "조회할 개수"
          }
        ],
        "responses": {
          "200": {
            "description": "댓글 목록 조회 성공",
            "schema": {
              "$ref": "#/definitions/CommentListResponse"
            }
          },
          "404": {
            "description": "게시글을 찾을 수 없음"
          }
        }
      },
      "post": {
        "summary": "댓글 작성",
        "description": "게시글에 새로운 댓글을 작성합니다 (로그인 필요)",
        "tags": ["comments"],
        "security": [{"Bearer": []}],
        "consumes": ["application/json"],
        "produces": ["application/json"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "게시글 ID"
          },
          {
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": ["content"],
              "properties": {
                "content": {
                  "type": "string",
                  "description": "댓글 내용"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "댓글 작성 성공"
          },
          "400": {
            "description": "잘못된 요청"
          },
          "401": {
            "description": "인증 필요"
          },
          "404": {
            "description": "게시글을 찾을 수 없음"
          }
        }
      }
    },
    "/articles/{id}/comments/{commentId}": {
      "put": {
        "summary": "댓글 수정",
        "description": "자신의 댓글을 수정합니다 (로그인 필요)",
        "tags": ["comments"],
        "security": [{"Bearer": []}],
        "consumes": ["application/json"],
        "produces": ["application/json"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "게시글 ID"
          },
          {
            "name": "commentId",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "댓글 ID"
          },
          {
            "name": "request",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": ["content"],
              "properties": {
                "content": {
                  "type": "string",
                  "description": "댓글 내용"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "댓글 수정 성공"
          },
          "400": {
            "description": "잘못된 요청"
          },
          "401": {
            "description": "인증 필요"
          },
          "403": {
            "description": "권한 없음"
          },
          "404": {
            "description": "댓글을 찾을 수 없음"
          }
        }
      },
      "delete": {
        "summary": "댓글 삭제",
        "description": "자신의 댓글을 삭제합니다 (로그인 필요)",
        "tags": ["comments"],
        "security": [{"Bearer": []}],
        "produces": ["application/json"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "게시글 ID"
          },
          {
            "name": "commentId",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "댓글 ID"
          }
        ],
        "responses": {
          "204": {
            "description": "댓글 삭제 성공"
          },
          "401": {
            "description": "인증 필요"
          },
          "403": {
            "description": "권한 없음"
          },
          "404": {
            "description": "댓글을 찾을 수 없음"
          }
        }
      }
    }
  },
  "definitions": {
    "Category": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "description": "카테고리 ID"
        },
        "name": {
          "type": "string",
          "description": "카테고리 이름"
        },
        "created_at": {
          "type": "string",
          "format": "date-time",
          "description": "생성일시"
        },
        "updated_at": {
          "type": "string",
          "format": "date-time",
          "description": "수정일시"
        }
      }
    },
    "ArticleResponse": {
      "type": "object",
      "properties": {
        "id": {"type": "integer"},
        "title": {"type": "string"},
        "content": {"type": "string"},
        "author_id": {"type": "integer"},
        "author_name": {"type": "string"},
        "view_count": {"type": "integer"},
        "categories": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {"type": "integer"},
              "name": {"type": "string"}
            }
          }
        },
        "created_at": {"type": "string", "format": "date-time"},
        "updated_at": {"type": "string", "format": "date-time"}
      }
    },
    "CommentResponse": {
      "type": "object",
      "properties": {
        "id": {"type": "integer"},
        "content": {"type": "string"},
        "author_id": {"type": "integer"},
        "author_name": {"type": "string"},
        "article_id": {"type": "integer"},
        "created_at": {"type": "string", "format": "date-time"},
        "updated_at": {"type": "string", "format": "date-time"}
      }
    },
    "CommentListResponse": {
      "type": "object",
      "properties": {
        "comments": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/CommentResponse"
          }
        },
        "next_cursor": {"type": "integer"},
        "has_more": {"type": "boolean"}
      }
    }
  }
}
